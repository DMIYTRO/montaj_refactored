# Changelog

Все значимые изменения в проекте будут документированы в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и проект придерживается [Semantic Versioning](https://semver.org/lang/ru/).

## [2.0.0] - 2024-11-27

### Добавлено
- Модульная архитектура - разделение на 6 независимых файлов
- `Logger.jsx` - система логирования с временными метками
- `README.md` - полная документация проекта
- `.gitignore` - правила для контроля версий
- Обработка ошибок с перемещением файлов в `_ERRORS/`
- Логирование всех операций в `processing_log.txt`
- Подробные комментарии в коде
- Поддержка новых материалов:
  - Arena ivory
  - Zenith C
  - Waterproof White
  - Woodstock Betulla

### Изменено
- **КРИТИЧНО:** Рефакторинг монолитного скрипта в модульную структуру
- Улучшена читаемость кода с добавлением комментариев
- Оптимизирована логика определения папок экспорта
- Упрощена функция `getPresetName()` с группировкой материалов
- Улучшена обработка специальных форматов (KONV, BAN, VUS)

### Исправлено
- **Критическая ошибка:** JDF файлы создавались с режимом "append" вместо "write"
  - Это приводило к созданию некорректных XML при повторной обработке
  - Изменено на режим "write" для корректной перезаписи
- **Баг в moveMyFiles():** функция выполняла цикл N раз для одного файла
  - Убран избыточный цикл `for(i=0; i<fileList.length; i++)`
  - Файл теперь перемещается однократно
- Исправлена обработка stroke style в функции `addMarks()`
  - Добавлено 6 уровней fallback для поиска сплошного стиля
  - Автоматическое создание стиля если не найден

### Удалено
- Глобальный массив `arrayJdf[]` - заменен на немедленное сохранение JDF
- Функция `saveJDF()` - JDF теперь сохраняется сразу после экспорта PDF
- Закомментированный мертвый код
- Дублирующиеся проверки материалов

---

## [1.0.0] - 2023-xx-xx

### Начальная версия
- Монолитный скрипт автоматизации спуска полос
- Базовая поддержка материалов и форматов
- Создание JDF для Fiery RIP
- Экспорт PDF/PS на сетевые папки
- Добавление меток реза
- Поддержка различных форматов бумаги

---

## Планируемые изменения (Roadmap)

### [2.1.0] - Планируется
- [ ] Конфигурация через JSON вместо hardcoded переменных
- [ ] Поддержка пользовательских шаблонов имен файлов
- [ ] Экспорт отчетов в CSV
- [ ] Валидация JDF через XML Schema
- [ ] Unit-тесты для критических функций

### [2.2.0] - Планируется
- [ ] Интернационализация (i18n) - поддержка английского
- [ ] Web-интерфейс для мониторинга
- [ ] REST API для интеграции с MIS системами
- [ ] Автоматические уведомления при ошибках

### [3.0.0] - Планируется
- [ ] Миграция на современный JavaScript (ES6+)
- [ ] Поддержка Adobe UXP (замена ExtendScript)
- [ ] Облачное хранилище логов
- [ ] Machine Learning для оптимизации раскладки

---

## Типы изменений
- **Добавлено** - новая функциональность
- **Изменено** - изменения в существующей функциональности
- **Устарело** - функциональность, которая скоро будет удалена
- **Удалено** - удаленная функциональность
- **Исправлено** - исправления багов
- **Безопасность** - исправления уязвимостей

---

## Контакты и поддержка

Для сообщений об ошибках и предложений используйте:
- GitHub Issues: https://github.com/DMIYTRO/montaj_refactored/issues
- Email: [ваш email]

---

[2.0.0]: https://github.com/DMIYTRO/montaj_refactored/releases/tag/v2.0.0
[1.0.0]: https://github.com/DMIYTRO/montaj_refactored/releases/tag/v1.0.0